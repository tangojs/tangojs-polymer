<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>with-tango test</title>

    <script src="../../webcomponentsjs/webcomponents-loader.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../with-tango.html">
  </head>
  <body>

    <dom-module id="with-tango-test">
      <script>
        class WithAttributeTest extends Tangojs.withTangoAttribute(Polymer.Element) {
          static get is() {
            return 'with-tango-test';
          }
        }
        customElements.define(WithAttributeTest.is, WithAttributeTest);
      </script>
    </dom-module>
  
    <test-fixture id="basic">
      <template>
        <with-tango-test model="[[device]]">
        </with-tango-test>
      </template>
    </test-fixture>

    <script>
      suite('Tangojs.withTango', () => {
        setup(() => {
          mixin = fixture('basic');
          mixin.set('model', "");
        });

        test('is ok', () => {
          expect(mixin).to.be.ok;
        });

        test('updates selected count on new list', () => {
          sinon.spy(mixin, 'createProxy');
          mixin.set('model', 'sys/tg_test/1');
          expect(mixin.createProxy).to.be.called;
        });

      });
    </script>

  </body>
</html>
